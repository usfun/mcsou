/** * aui-popup.js * @author 流浪男 * @todo more things to abstract, e.g. Loading css etc. * Licensed under the MIT license. * http://www.opensource.org/licenses/mit-license.php */(function(f,g){var c=function(){};c.prototype={create:function(a,b){var c=this,d="";switch(a.type){case "success":var e='\x3ci class\x3d"aui-iconfont aui-icon-correct"\x3e\x3c/i\x3e';break;case "fail":e='\x3ci class\x3d"aui-iconfont aui-icon-close"\x3e\x3c/i\x3e';break;case "custom":e=a.html;break;case "loading":e='\x3cdiv class\x3d"aui-toast-loading"\x3e\x3c/div\x3e'}d='\x3cdiv class\x3d"aui-toast"\x3e'+e+(a.title?'\x3cdiv class\x3d"aui-toast-content"\x3e'+a.title+"\x3c/div\x3e":"")+"\x3c/div\x3e";document.querySelector(".aui-toast")||(document.body.insertAdjacentHTML("beforeend",d),d=a.duration?a.duration:"2000",c.show(),"loading"==a.type?b&&b({status:"success"}):setTimeout(function(){c.hide()},d))},show:function(){document.querySelector(".aui-toast").style.display="block";document.querySelector(".aui-toast").style.marginTop="-"+Math.round(document.querySelector(".aui-toast").offsetHeight/2)+"px";document.querySelector(".aui-toast")},hide:function(){document.querySelector(".aui-toast")&&document.querySelector(".aui-toast").parentNode.removeChild(document.querySelector(".aui-toast"))},remove:function(){document.querySelector(".aui-dialog")&&document.querySelector(".aui-dialog").parentNode.removeChild(document.querySelector(".aui-dialog"));document.querySelector(".aui-mask")&&document.querySelector(".aui-mask").classList.remove("aui-mask-out");return!0},success:function(a,b){a.type="success";return this.create(a,b)},fail:function(a,b){a.type="fail";return this.create(a,b)},custom:function(a,b){a.type="custom";return this.create(a,b)},loading:function(a,b){a.type="loading";return this.create(a,b)}};f.auiToast=c})(window); /** * aui-dialog.js * @author 流浪男 * @todo more things to abstract, e.g. Loading css etc. * Licensed under the MIT license. * http://www.opensource.org/licenses/mit-license.php */(function(k,l){var d=function(){};d.prototype={params:{title:"",msg:"",buttons:["\u53d6\u6d88","\u786e\u5b9a"],input:!1},create:function(a,b){var e=this,c="",f=a.title?'\x3cdiv class\x3d"aui-dialog-header"\x3e'+a.title+"\x3c/div\x3e":'\x3cdiv class\x3d"aui-dialog-header"\x3e'+e.params.title+"\x3c/div\x3e";if(a.input){a.text=a.text?a.text:"";var d='\x3cdiv class\x3d"aui-dialog-body"\x3e\x3cinput type\x3d"text" placeholder\x3d"'+a.text+'"\x3e\x3c/div\x3e'}else d=a.msg?'\x3cdiv class\x3d"aui-dialog-body"\x3e'+a.msg+"\x3c/div\x3e":'\x3cdiv class\x3d"aui-dialog-body"\x3e'+e.params.msg+"\x3c/div\x3e";var g=a.buttons?a.buttons:e.params.buttons;if(g&&0<g.length)for(var h=0;h<g.length;h++)c+='\x3cdiv class\x3d"aui-dialog-btn" tapmode button-index\x3d"'+h+'"\x3e'+g[h]+"\x3c/div\x3e";document.body.insertAdjacentHTML("beforeend",'\x3cdiv class\x3d"aui-dialog"\x3e'+f+d+('\x3cdiv class\x3d"aui-dialog-footer"\x3e'+c+"\x3c/div\x3e")+"\x3c/div\x3e");if((c=document.querySelectorAll(".aui-dialog-btn"))&&0<c.length)for(f=0;f<c.length;f++)c[f].onclick=function(){b&&(a.input?b({buttonIndex:parseInt(this.getAttribute("button-index"))+1,text:document.querySelector("input").value}):b({buttonIndex:parseInt(this.getAttribute("button-index"))+1}));e.close()};e.open()},open:function(){document.querySelector(".aui-dialog")&&(document.querySelector(".aui-dialog").style.marginTop="-"+Math.round(document.querySelector(".aui-dialog").offsetHeight/2)+"px",document.querySelector(".aui-mask")||document.body.insertAdjacentHTML("beforeend",'\x3cdiv class\x3d"aui-mask"\x3e\x3c/div\x3e'),setTimeout(function(){document.querySelector(".aui-dialog").classList.add("aui-dialog-in");document.querySelector(".aui-mask").classList.add("aui-mask-in");document.querySelector(".aui-dialog").classList.add("aui-dialog-in")},10),document.querySelector(".aui-mask").addEventListener("touchmove",function(a){a.preventDefault()}),document.querySelector(".aui-dialog").addEventListener("touchmove",function(a){a.preventDefault()}))},close:function(){var a=this;document.querySelector(".aui-mask").classList.remove("aui-mask-in");document.querySelector(".aui-dialog").classList.remove("aui-dialog-in");document.querySelector(".aui-dialog").classList.add("aui-dialog-out");document.querySelector(".aui-dialog:not(.aui-dialog-out)")?setTimeout(function(){document.querySelector(".aui-dialog")&&document.querySelector(".aui-dialog").parentNode.removeChild(document.querySelector(".aui-dialog"));a.open();return!0},200):(document.querySelector(".aui-mask").classList.add("aui-mask-out"),document.querySelector(".aui-dialog").addEventListener("webkitTransitionEnd",function(){a.remove()}),document.querySelector(".aui-dialog").addEventListener("transitionend",function(){a.remove()}))},remove:function(){document.querySelector(".aui-dialog")&&document.querySelector(".aui-dialog").parentNode.removeChild(document.querySelector(".aui-dialog"));document.querySelector(".aui-mask")&&document.querySelector(".aui-mask").classList.remove("aui-mask-out");return!0},alert:function(a,b){return this.create(a,b)},prompt:function(a,b){a.input=!0;return this.create(a,b)}};k.auiDialog=d})(window);